@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html, body, #root {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    margin: 0;
    padding: 0;
  }

  /* Mobile only: fixed viewport to prevent iOS scroll bounce */
  @media (max-width: 1023px) {
    html, body, #root {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
  }

  /* Desktop: normal scroll behavior */
  @media (min-width: 1024px) {
    html, body, #root {
      min-height: 100vh;
    }
  }

  body {
    background-color: #FAFAFA;
    color: #2D2D2D;
    -webkit-tap-highlight-color: transparent;
  }

  /* Re-enable tap highlight only on interactive elements */
  button, a, [role="button"] {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    touch-action: manipulation;
  }

  /* Allow text selection in inputs */
  input, textarea {
    -webkit-user-select: text;
    user-select: text;
  }
}

@layer utilities {
  /* Safe area utilities for iOS */
  .pt-safe-header {
    padding-top: calc(env(safe-area-inset-top, 0px) + 72px);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  @screen lg {
    .pt-safe-header {
      padding-top: 2rem; /* lg:pt-8 equivalent */
    }
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-semibold transition-all focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  .btn:disabled,
  .btn[aria-disabled="true"] {
    @apply cursor-not-allowed pointer-events-none;
    opacity: 0.6;
    filter: grayscale(0.3);
  }

  .btn-primary {
    @apply btn bg-primary-500 text-white focus:ring-primary-500;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }
  .btn-primary:hover:not(:disabled):not([aria-disabled="true"]) {
    @apply bg-primary-600;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }
  .btn-primary:disabled,
  .btn-primary[aria-disabled="true"] {
    @apply bg-gray-300 text-gray-500;
    box-shadow: none;
  }

  .btn-secondary {
    @apply btn bg-white text-gray-700 border border-gray-200 focus:ring-gray-500;
  }
  .btn-secondary:hover:not(:disabled):not([aria-disabled="true"]) {
    @apply bg-gray-50;
  }
  .btn-secondary:disabled,
  .btn-secondary[aria-disabled="true"] {
    @apply bg-gray-100 text-gray-400 border-gray-200;
  }

  .btn-danger {
    @apply btn text-white focus:ring-red-500;
    background-color: #EF4444;
  }
  .btn-danger:hover:not(:disabled):not([aria-disabled="true"]) {
    background-color: #DC2626;
  }
  .btn-danger:disabled,
  .btn-danger[aria-disabled="true"] {
    @apply bg-gray-300 text-gray-500;
  }

  .btn-success {
    @apply btn text-white focus:ring-green-500;
    background-color: #10B981;
  }
  .btn-success:hover:not(:disabled):not([aria-disabled="true"]) {
    background-color: #059669;
  }
  .btn-success:disabled,
  .btn-success[aria-disabled="true"] {
    @apply bg-gray-300 text-gray-500;
  }

  .input {
    @apply w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white placeholder:text-gray-400;
    color: #2D2D2D;
  }

  .label {
    @apply block text-sm font-semibold text-gray-600 mb-1.5;
  }

  .card {
    @apply bg-white rounded-2xl border border-gray-100;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Status badges */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold;
  }

  .badge-success {
    @apply badge;
    background-color: #ECFDF5;
    color: #059669;
  }

  .badge-warning {
    @apply badge;
    background-color: #FFFBEB;
    color: #D97706;
  }

  .badge-error {
    @apply badge;
    background-color: #FEF2F2;
    color: #DC2626;
  }

  .badge-info {
    @apply badge;
    background-color: #EFF6FF;
    color: #2563EB;
  }

  .badge-primary {
    @apply badge;
    background-color: #FFF7ED;
    color: #E55A2B;
  }
}
